(function(t,e,n,a){var o=elementor.modules.controls.Select2.extend({isUpdated:!1,onReady:function(){var t=this,e=t.options.container.settings.attributes.post_type_filter;if("post"!==e){var n=0===this.model.get("options").length;n&&t.fetchData(e)}elementor.channels.editor.on("change",function(e){var n=e.container.settings.changed;a===n.post_type_filter||"post"===n.post_type_filter||t.isUpdated||(t.isUpdated=!0,t.fetchData(n.post_type_filter))})},fetchData:function(e){var n=this;t.ajax({url:AAFESettings.ajaxurl,dataType:"json",type:"POST",data:{nonce:AAFESettings.nonce,action:"athemes_addons_update_posts_filter",post_type:e},success:function(t){n.updateFilterOptions(JSON.parse(t.data)),n.isUpdated=!1,n.render()},error:function(t){console.log(t)}})},updateFilterOptions:function(t){this.model.set("options",t)},onBeforeDestroy:function(){this.ui.select.data("select2"),this.$el.remove()}});elementor.addControlView("aafe-post-filter",o)})(jQuery,window,document),function(t){t(document).on("aafe_query_control_init",function(e,n){var a="#elementor-control-default-"+n.data._cid;setTimeout(function(){var e=t(a).select2({minimumInputLength:3,ajax:{type:"POST",url:AAFESettings.ajaxurl,dataType:"json",data:function(t){return{action:"aafe_posts_filter_autocomplete",post_type:n.data.source_type,source_name:n.data.source_name,term:t.term}}},initSelection:function(e,a){n.multiple?a({id:"",text:""}):a({id:"",text:AAFESettings.search_text});var o=[];if(Array.isArray(n.currentID)||""==n.currentID?Array.isArray(n.currentID)&&(o=n.currentID.filter(function(t){return null!=t})):o=[n.currentID],o.length>0){var i=t("label[for='elementor-control-default-"+n.data._cid+"']");i.after('<span class="elementor-control-spinner">&nbsp;<i class="eicon-spinner eicon-animation-spin"></i>&nbsp;</span>'),t.ajax({method:"POST",url:AAFESettings.ajaxurl,data:{action:"aafe_get_posts_value_titles",post_type:n.data.source_type,source_name:n.data.source_name,id:o}}).done(function(t){if(t.success&&void 0!==t.data.results){let n="";o.forEach(function(e,a){if(void 0!==t.data.results[e]){const a=e,o=t.data.results[e];n+=`<option selected="selected" value="${a}">${o}</option>`}}),e.append(n)}i.siblings(".elementor-control-spinner").remove()})}}});setTimeout(function(){e.next().children().children().children().sortable({containment:"parent",stop:function(n,a){a.item.parent().children("[title]").each(function(){var n=t(this).attr("title"),a=t("option:contains("+n+")",e).first();a.detach(),e.append(a)}),e.change()}}),t(a).on("select2:select",function(e){var n=e.params.data.element,a=t(n);a.detach(),t(this).append(a),t(this).trigger("change")})},200)},100)})}(jQuery);